define(["jquery","core/ajax","core/templates","core/notification"],function(e,o,a,n){return{init:function(r){var s=(r=r||{}).lockedcardmode||"blocked",c=void 0===r.showlockeddate||r.showlockeddate,t=r.cardicon||"",i=r.learnmorebuttoncolor||"#667eea",d="";t&&(d=function(e){if(!e)return"";if(-1!==e.indexOf(":")){var o=e.split(":")[1]||"";return 0===o.indexOf("fab-")?"fa fa-fw fab fa-"+o.substring(4):0===o.indexOf("fa-")?"fa fa-fw "+o:(console.warn('[local_dimensions] Cannot resolve icon "'+e+'". Re-save the setting to update the stored value.'),"fa fa-fw fa-"+o.replace(/\//g,"-"))}if(0===e.indexOf("fa-"))return"fa fa-fw "+e;return e}(t));var l=e(".dims-progress-container"),f=[];l.each(function(){var o=e(this).data("courseid");o&&f.push(o)}),0!==f.length&&o.call([{methodname:"local_dimensions_get_course_progress",args:{courseids:f}}])[0].done(function(o){e.each(o,function(o,r){var t=e('.dims-progress-container[data-courseid="'+r.courseid+'"]');r.enabled&&r.sections&&e.each(r.sections,function(e,o){o.has_activities&&(100==o.percentage?o.badge_class="badge-success":o.percentage>0?o.badge_class="badge-info":o.badge_class="badge-secondary"),o.dasharray=(.754*o.percentage).toFixed(2)}),r.islearnmore="learnmore"===s,r.showlockeddate=c,r.customicon=d,r.courseurl=r.course_url||"",r.learnmorebuttoncolor=i,a.render("local_dimensions/progress_card_body",r).then(function(e,o){if(a.replaceNodeContents(t,e,o),r.locked){var n=t.closest(".card"),s=t.find(".dims-locked-overlay");n.length&&s.length&&s.appendTo(n)}}).fail(n.exception)})}).fail(function(e){console.error(e),l.html('<div class="text-danger small p-2">'+M.util.get_string("connection_error","local_dimensions")+"</div>")})}}});
//# sourceMappingURL=ui.min.js.map