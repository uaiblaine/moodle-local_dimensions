/**
 * SCSS frontend validation and editor format hiding for template forms.
 *
 * Validates SCSS syntax client-side before form submission:
 * - Detects unmatched closing braces/parentheses.
 * - Detects unbalanced brace/parenthesis pairs.
 * - Warns about likely missing semicolons (with user confirmation).
 *
 * Also hides the editor format dropdown for the SCSS custom field,
 * since the value is forced to FORMAT_PLAIN on the server side.
 *
 * @module     local_dimensions/scss_validation
 * @copyright  2026 Anderson Blaine
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define([],function(){var t={},e=['textarea[name="customfield_customscss_editor[text]"]','textarea[name="customfield_customscss[text]"]','textarea[name="customfield_customscss"]'],n=["#fitem_id_customfield_customscss_editorformat","#fgroup_id_customfield_customscss_editorformat"],r=["#menucustomfield_customscss_editorformat","#id_customfield_customscss_editorformat",'select[name="customfield_customscss_editor[format]"]','select[name="customfield_customscss[format]"]'],o=function(){n.forEach(function(t){var e=document.querySelector(t);e&&(e.style.display="none")}),document.querySelectorAll(r.join(", ")).forEach(function(t){if(t.style.display="none",t.id){var e=document.querySelector('label[for="'+t.id+'"]');e&&(e.style.display="none")}var n=t.parentElement;!n||n.classList.contains("fitem")||n.id.startsWith("fitem_")||0!==n.querySelectorAll("textarea, [contenteditable]").length||(n.style.display="none")})};return{init:function(n){t=n||{},o(),setTimeout(o,500),setTimeout(o,1500);var r=document.querySelector("form.mform");r&&r.addEventListener("submit",function(n){var r=function(){try{void 0!==window.tinyMCE&&"function"==typeof window.tinyMCE.triggerSave&&window.tinyMCE.triggerSave()}catch(t){}for(var t=null,n=0;n<e.length&&!(t=document.querySelector(e[n]));n++);if(!t)return"";var r=(t.value||"").trim();if(-1!==r.indexOf("<")){var o=document.createElement("div");o.innerHTML=r,r=(o.textContent||o.innerText||"").trim()}return r}();if(r){var o=function(e){for(var n=0,r=0,o=0;o<e.length;o++){var i=e.charAt(o);if("{"===i)n++;else if("}"===i&&--n<0)return t.closingbracewithoutopen;if("("===i)r++;else if(")"===i&&--r<0)return t.closingparenwithoutopen}return 0!==n?t.unbalancedbraces:0!==r?t.unbalancedparentheses:""}(r);if(o)return n.preventDefault(),n.stopPropagation(),void window.alert(o);var i=function(t){for(var e=t.split("\n"),n=[],r=/^(-{2}|\$|[a-zA-Z_])[\w-]*\s*:\s*.+$/,o=0;o<e.length;o++){var i=e[o].trim();if(i&&!(/^\/\//.test(i)||/^\/\*/.test(i)||/^\*/.test(i)||/^\*\//.test(i))&&r.test(i)&&!/[;{},]\s*$/.test(i)&&(n.push(o+1),n.length>=8))break}return n}(r);if(i.length){var s=i.join(", "),a=(t.punctuationwarning||"").replace("{$a}",s);window.confirm(a)||(n.preventDefault(),n.stopPropagation())}}})}}});
//# sourceMappingURL=scss_validation.min.js.map